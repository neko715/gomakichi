<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ごまきちの居場所</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        button { font-size: 24px; padding: 10px; margin: 10px; }
        .active { background-color: red; color: white; }
    </style>
</head>
<body>
    <h1>ごまきちはここ</h1>
    <button id="btn1" onclick="updateLocation(1)">1階</button>
    <button id="btn2" onclick="updateLocation(2)">2階</button>

    <script>
        const apiUrl = "https://script.google.com/macros/s/AKfycbyzpD4A5ZuO60GNBEpmv1723JZbIDhYOWMPnxzSun_zvEixI1EzIOiLeiO0m4GpB83Eig/exec"; 

        async function updateLocation(floor) {
            await fetch(apiUrl, {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: `value=${floor}`
            });
            highlightButton(floor);
        }

        async function checkLocation() {
            const response = await fetch(apiUrl);
            const floor = await response.text();
            highlightButton(floor);
        }

        function highlightButton(floor) {
            document.getElementById("btn1").classList.remove("active");
            document.getElementById("btn2").classList.remove("active");

            if (floor == "1") {
                document.getElementById("btn1").classList.add("active");
            } else if (floor == "2") {
                document.getElementById("btn2").classList.add("active");
            }
        }

        setInterval(checkLocation, 500);
        checkLocation();
    </script>
</body>
</html>
